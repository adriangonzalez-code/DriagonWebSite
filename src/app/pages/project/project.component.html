<!-- PROJECTS SECTION -->
<section id="projects" class="flex flex-col justify-center px-6 bg-gradient-to-r from-black to-gray-900 py-20 animate__animated animate__fadeIn">
  <header>
    <h2 class="text-5xl font-bold text-center mb-10 mt-5 animate__animated animate__zoomIn text-gray-400">
      Projects
    </h2>
  </header>
  <div class="grid grid-cols-1 md:grid-cols-3 gap-8 max-w-6xl mx-auto">
    <!-- Project Card -->
    <div *ngFor="let project of projects; let i = index"
         class="bg-gradient-to-br from-gray-800 to-gray-600 border border-gray-600 text-white rounded-xl p-6 shadow-md hover:shadow-lg transition transform hover:-translate-y-1 cursor-pointer opacity-0 animate-zoomFromBack"
         [style.animationDelay]="(i * 0.2) + 's'"
         (click)="openModal(project)">

      <!-- Card Header -->
      <h3 class="font-bold mb-2 text-xl">{{ project.name }}</h3>
      <p class="text-gray-400 line-clamp-3">{{ project.description }}</p>

      <!-- Technologies -->
      <div class="flex flex-wrap gap-2 mt-4 text-xs">
        <span *ngFor="let tech of project.technologies.slice(0, 4)"
              class="bg-red-600 rounded-full px-2 py-1">
          {{ tech }}
        </span>
      </div>
    </div>
  </div>
</section>

<!-- Modal -->
<div *ngIf="selectedProject"
     class="fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-[1000] p-4"
     [ngClass]="{'animate-fadeIn': opening, 'animate-fadeOut': closing}"
     (click)="closeModal()">

  <!-- Modal Content -->
  <div class="bg-gradient-to-br from-gray-800 to-black border-2 border-red-700 text-white rounded-2xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col"
       [ngClass]="{'animate-zoomFromBack': opening, 'animate-zoomToBack': closing}"
       (click)="$event.stopPropagation()">

    <!-- Header -->
    <header class="flex items-center justify-between p-4 border-b border-gray-700 flex-shrink-0">
      <h3 class="text-2xl font-bold">{{ selectedProject.name }}</h3>
      <button (click)="closeModal()" class="text-gray-400 hover:text-white transition text-3xl leading-none">&times;</button>
    </header>

    <!-- Body -->
    <main class="flex-1 overflow-y-auto p-6">
      <div class="flex flex-col gap-8">

        <!-- Description, Actions, and Tech -->
        <div class="w-full">
          <p class="mb-4 text-gray-300 text-justify">{{ selectedProject.overview }}</p>

          <!-- Botones de AcciÃ³n -->
          <div class="my-6 flex flex-wrap items-center gap-4">
            <button *ngIf="selectedProject.github" type="button" (click)="navigateTo(selectedProject.github); $event.stopPropagation()"
                    class="inline-flex items-center gap-2 bg-gray-700 hover:bg-gray-600 text-white font-semibold py-2 px-4 rounded-lg transition-colors">
              <fa-icon [icon]="faGithub" class="text-lg"></fa-icon>
              <span>View on GitHub</span>
            </button>
            <button *ngIf="selectedProject.demo" type="button" (click)="navigateTo(selectedProject.demo); $event.stopPropagation()"
                    class="inline-flex items-center gap-2 bg-red-700 hover:bg-red-600 text-white font-semibold py-2 px-4 rounded-lg transition-colors">
              <fa-icon [icon]="faExternalLink" class="text-lg"></fa-icon>
              <span>Live Demo</span>
            </button>
          </div>

          <!-- Technologies -->
          <div class="flex flex-wrap gap-2">
            <span *ngFor="let tech of selectedProject.technologies" class="bg-red-600 rounded-full px-3 py-1 text-sm">
                {{ tech }}
            </span>
          </div>
        </div>

        <!-- Image -->
        <div class="w-full">
          <div *ngIf="selectedProject.media && selectedProject.media.length > 0"
               class="relative zoom-container"
               [class.zoomed]="isZoomed"
               (click)="toggleZoom()"
               (mousemove)="onMouseMove($event)">
            <img [src]="selectedProject.media[currentSlide]"
                 alt="{{ selectedProject.name }} screenshot">
            <ng-container *ngIf="!isZoomed">
              <button *ngIf="selectedProject.media.length > 1" (click)="$event.stopPropagation(); prevSlide()" class="absolute left-2 top-1/2 -translate-y-1/2 bg-black bg-opacity-50 p-2 rounded-full hover:bg-opacity-75 transition">&lt;</button>
              <button *ngIf="selectedProject.media.length > 1" (click)="$event.stopPropagation(); nextSlide()" class="absolute right-2 top-1/2 -translate-y-1/2 bg-black bg-opacity-50 p-2 rounded-full hover:bg-opacity-75 transition">&gt;</button>
            </ng-container>
          </div>
        </div>
      </div>
    </main>
  </div>
</div>
